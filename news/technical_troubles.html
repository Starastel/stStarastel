<html>
<head>
	<link rel="stylesheet" type="text/css" href="../styles.css">
	<link rel="shortcut icon" href="../icon.ico" type="image/x-icon"/>
	<link rel="apple-touch-icon" type="image/png" href="../icon.png">
	
<title>Технические неполадки — Starastel</title>
</head>
<body bgcolor="#000000" text="White" link="White" alink="Yellow" vlink="White">
<center>

<div class="main">

<div class="name">Технические неполадки</div>

<div class="textMnBox">
<br>
<p>За прошлый месяц я ничего не написал. Да и за позапрошлый тоже... И ведь логично — я болван, но это и не удивительно. А так, если опустить все проблемы, даже за эти два месяца я сделал не особо много.</p><br>

<p>Из плохих (или хороших) новостей — я заморозил проект по локализации Never7 -Eternal Edition- из-за того, что вышла его новая версия и старая стала не совместима с новой. Потеря не большая, но я для него даже перерисовал графику. И в итоге — всё в пустую. С другой стороны — свободное время можно потратить на порт Ever17.</p><br>
<p>Кстати о нём. За прошедшее, с последней записи, время было сделано следующее:</p>
<ul>
<li>Переделан игровой интерфейс под более высокое разрешение.</li>
<li>Часы, по дизайну, стали походить на вариант из Dreamcast версии и немного изменён алгоритм их работы.</li>
<li>Шрифт MPLUS 1m заменён на Zen Kaku Gothic Antique. Также, как впрочем и MPLUS, он был немного видоизменён, чтобы на низких разрешениях он выглядел, по крайней мере, нормально.</li>
<li>Портирован первый день линии за Такеши.</li>
<li>Частично автоматизировано создание скриптов.</li>
<li>Масштабируемое окно с выборами было заменено на обычные кнопки из-за того, что старое окно может нормально отображать только три варианта.</li>
<li>Извлечены и преобразованы все фоны из PS2 версии.</li>
<li>Переконвертированы звук и графика.</li>
<li>Мелкие оптимизации.</li>
</ul>
<br>
<p>Есть и ещё некоторые другие изменения, но либо они очень незначительные, либо я их забыл.</p><br>

<p>Расскажу я немного про преобразование фонов из PS2 версии. Это отдельный кошмар. Сначала я заметил, что некоторые фоны из ПК версии выглядят не как все. Они как-будто были в более низком разрешении и потом их просто растянули до 800 на 600. Можно было бы и забить на такую незначительную деталь... Но я не смог. Нет. Я пошёл дальше и начал искать возможность извлечения из PS2 версии, так как на Dreamcast (далее DC) они очень сильно пожаты. Как ни странно, первым изображением, которое я извлёк, был фон главного меню на PS2. Самое интересное — он был в разрешении 640 на 480, когда как PS2 выдавала 640 на 448. И, чёрт побери, он намного лучше фона ПК версии.</p><br> 

<p>Ладно, это были только цветочки, а далее пошли настоящие шипастые ягоды. В главном меню у фона один формат, а у игровых фонов другой. Сначала я еле-еле нашёл программу, распаковывающую «.bip» файлы, и... Далее после длительной обработки изображения был извлечён первый фон — «map_none». Но потратил на это 20–30 минут. А обработка эта нужна, так как исходное изображение... В общем, это очень долго и объяснять и очень долго обрабатывать. Не порядок. И я решил немного автоматизировать этот процесс.</p><br>
<ul>
<li>С помощью специальной программы и скрипта я распаковывал все «.bip» файлы с фонами.</li>
<li>С помощью утилиты я dd отрезал у распакованных изображений заголовок.</li>
<li>Далее, вручную (так как другого способа не нашёл) с помощью TiledGGD я преобразовал все изображения в «.png».</li>
<li>С помощью Ren-Engine и специального... Э-э-э, назовём это фоновым объектом. Так вот, с его помощью него отображаем изображение и делаем скриншот. </li>
</ul>
<br>
<p>Вот и готовый фон! Осталось произвести ту же операцию со всеми 200 или более фонами. Единственное, это работает только с фонами в разрешении 640 на 480, но зато были извлечены даже запоротые в ПК версии фоны (конкретно — барокамера).</p><br>

<p>Не отрицаю, что где-то, ещё в 90-х и под DOS, существовала программа, которая могла бы выполнить то же самое намного быстрее, но, увы, я её не знаю. Потому что в этом море помоев — интернете, найти что-то необходимое крайне проблематично.</p><br>

<p>А про «частично автоматизированное создание скриптов» можно сказать следующее: при преобразовании получается только текст. Без музыки, звуков, графики или анимации. Но зато это ускоряет процесс их создания... По крайней мере, так я думаю. Это всё равно быстрее, чем собирать один скрипт из трёх других.</p><br>
<p>Вообще нужно поправить код и изменить немного его синтаксис. А также, что не обязательно, заставить игру работать частично с оригинальной, не улучшенной, графикой. Она, конечно, может работать с оригинальными фонами, но не спрайтами персонажей — там нужно редактировать код.</p><br>
<br><div class="dateText">07–08 апреля 2022</div>

<dt>Меню:</dt>
<dd><a href="../all_texts.html">Все записи<br>
<dd><a href="../about.html">О сайте</a></dd>
</div>

<div id="footer">© 2022 Станислав «Starastel» П.</div>

</div>
<script>
if (window.devicePixelRatio !== 1) { // Костыль для определения иных устройств, с коэффициентом отличным от 1		
  var dpt = window.devicePixelRatio;
  var widthM = window.screen.width * dpt;
  var widthH = window.screen.height * dpt;
  document.write('<meta name="viewport" content="width=' + widthM+ ', height=' + widthH + '">');
}
</script>
</body>
</html>
